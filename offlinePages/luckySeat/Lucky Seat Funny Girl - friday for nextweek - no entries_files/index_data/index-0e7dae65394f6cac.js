(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{9536:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(8268)}])},1369:function(e,t,n){"use strict";n.d(t,{z:function(){return v},h:function(){return E}});var a=n(4246),o=n(7378);const r=e=>(0,a.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.5377 4.47719C18.8265 4.77418 18.8198 5.24901 18.5228 5.53775L8.2371 15.5377C7.946 15.8208 7.48257 15.8208 7.19148 15.5377L1.47719 9.98219C1.1802 9.69345 1.17351 9.21863 1.46225 8.92164C1.75099 8.62465 2.22582 8.61796 2.52281 8.9067L7.71429 13.954L17.4772 4.46225C17.7742 4.17351 18.249 4.1802 18.5377 4.47719Z",fill:"currentColor"})}),s=e=>{let{className:t=""}=e;return(0,a.jsx)("svg",{className:t,xmlns:"http://www.w3.org/2000/svg",width:"44",height:"44",viewBox:"0 0 44 44",stroke:"currentColor",children:(0,a.jsxs)("g",{fill:"none",fillRule:"evenodd",strokeWidth:"2",children:[(0,a.jsxs)("circle",{cx:"22",cy:"22",r:"1",children:[(0,a.jsx)("animate",{attributeName:"r",begin:"0s",dur:"1.8s",values:"1; 20",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.165, 0.84, 0.44, 1",repeatCount:"indefinite"}),(0,a.jsx)("animate",{attributeName:"stroke-opacity",begin:"0s",dur:"1.8s",values:"1; 0",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.3, 0.61, 0.355, 1",repeatCount:"indefinite"})]}),(0,a.jsxs)("circle",{cx:"22",cy:"22",r:"1",children:[(0,a.jsx)("animate",{attributeName:"r",begin:"-0.9s",dur:"1.8s",values:"1; 20",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.165, 0.84, 0.44, 1",repeatCount:"indefinite"}),(0,a.jsx)("animate",{attributeName:"stroke-opacity",begin:"-0.9s",dur:"1.8s",values:"1; 0",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.3, 0.61, 0.355, 1",repeatCount:"indefinite"})]})]})})};n(2829),n(1529);var i="zkg68d2 ednwsl18 ednwsl4h ednwsl80 ednwsl85 ednwsl35 ednwsl13 ednwsl4n",d={currentColor:"zkg68de",transparent:"ednwsl1c ednwsl3y ednwsl24 ednwsl30 ednwsl2v",systemColor:"zkg68dg ednwsl1c ednwsl3y ednwsl3j ednwsl24 ednwsl30 ednwsl29",gray:"zkg68dh ednwsl1j",special:"zkg68di ednwsl1h ednwsl45",white:"zkg68dj",interactive:"zkg68dk ednwsl1y ednwsl45"},l={0:"zkg68dn",5:"ednwsl33",rightSide10:"zkg68dm"},c="zkg68dv ednwsl3k ednwsl4e ednwsl18 ednwsl53 ednwsl4c",u={0:"zkg68d1a",leftDarkElement200:"zkg68d1b"},m={dark:"zkg68dy",darkWaiting:"zkg68dz",transparent:"ednwsl1c",quiet:"zkg68d11",interactive:"zkg68d12 ednwsl1y ednwsl45"},p={s:"ednwsl4x ednwsl5w",m:"ednwsl4y ednwsl5x",l:"ednwsl4z ednwsl5y",xl:"zkg68d19"},f={s:"ednwsl4x",m:"ednwsl4z",l:"zkg68d8 ednwsl32"};const v=e=>{let{className:t="",colorScheme:n="interactive",status:o="",size:l="m",...c}=e;return(0,a.jsxs)("button",{"data-status":o,className:[t,i,f[l],d[n]].join(" "),disabled:c.disabled||"loading"===o||"complete"===o,...c,children:[c.children,"loading"===o&&(0,a.jsx)(s,{className:"ednwsl4x ednwsl5w ednwsl7c"}),"complete"===o&&(0,a.jsx)(r,{})]})},E=e=>{let{size:t="m",elementType:n="button",children:a,colorScheme:r="transparent",borderRadius:s=5,className:i="",border:d=0,...f}=e;return o.createElement(n,{...f,className:[c,p[t],m[r],l[s],u[d],i].join(" ")},a)}},8781:function(e,t,n){"use strict";n.d(t,{R:function(){return r},X:function(){return o},c:function(){return s}});var a=n(4246);n(7378);const o=e=>(0,a.jsx)("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.49994 3.43934C3.79283 3.14645 4.26771 3.14645 4.5606 3.43934L7.53027 6.40901L10.4999 3.43934C10.7928 3.14645 11.2677 3.14645 11.5606 3.43934C11.8535 3.73223 11.8535 4.20711 11.5606 4.5L8.59093 7.46967L11.5606 10.4393C11.8535 10.7322 11.8535 11.2071 11.5606 11.5C11.2677 11.7929 10.7928 11.7929 10.4999 11.5L7.53027 8.53033L4.5606 11.5C4.26771 11.7929 3.79283 11.7929 3.49994 11.5C3.20705 11.2071 3.20705 10.7322 3.49994 10.4393L6.46961 7.46967L3.49994 4.5C3.20705 4.20711 3.20705 3.73223 3.49994 3.43934Z",fill:"currentColor"})}),r=e=>(0,a.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.89879 3.89888C4.1331 3.66457 4.513 3.66457 4.74732 3.89888L8.00001 7.15157L11.2527 3.89888C11.487 3.66457 11.8669 3.66457 12.1012 3.89888C12.3355 4.1332 12.3355 4.51309 12.1012 4.74741L8.84854 8.0001L12.1012 11.2528C12.3355 11.4871 12.3355 11.867 12.1012 12.1013C11.8669 12.3356 11.487 12.3356 11.2527 12.1013L8.00001 8.84863L4.74732 12.1013C4.513 12.3356 4.1331 12.3356 3.89879 12.1013C3.66447 11.867 3.66447 11.4871 3.89879 11.2528L7.15148 8.0001L3.89879 4.74741C3.66447 4.51309 3.66447 4.1332 3.89879 3.89888Z",fill:"currentColor"})}),s=e=>(0,a.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.38618 4.38612C4.64978 4.12251 5.07717 4.12251 5.34077 4.38612L9.00005 8.0454L12.6593 4.38612C12.9229 4.12251 13.3503 4.12251 13.6139 4.38612C13.8775 4.64972 13.8775 5.07711 13.6139 5.34071L9.95465 8.99999L13.6139 12.6593C13.8775 12.9229 13.8775 13.3503 13.6139 13.6139C13.3503 13.8775 12.9229 13.8775 12.6593 13.6139L9.00005 9.95458L5.34077 13.6139C5.07717 13.8775 4.64978 13.8775 4.38618 13.6139C4.12258 13.3503 4.12258 12.9229 4.38618 12.6593L8.04546 8.99999L4.38618 5.34071C4.12258 5.07711 4.12258 4.64972 4.38618 4.38612Z",fill:"currentColor"})})},3390:function(e,t,n){"use strict";n.d(t,{M:function(){return s}});n(4246);var a=n(7378),o=n(5218),r=n.n(o);n(3355),n(7883);const s=a.createContext({dialogState:{open:!1,type:"",data:{},closeOnAnyClick:!1},setDialogState:()=>{},closeAndReset:()=>{}});r()((()=>Promise.all([n.e(952),n.e(691)]).then(n.bind(n,4691))),{loadableGenerated:{webpack:()=>[4691]}})},4628:function(e,t,n){"use strict";n.d(t,{u:function(){return a}});const a=n(7378).createContext({toast:{message:"",type:"",toastContainerProps:{},lifetime:3e3},setToast:()=>{},promptToast:()=>Promise.resolve()})},3351:function(e,t,n){"use strict";n(7378).createContext({history:[],setHistory:()=>{}});n(6677)},3355:function(e,t,n){"use strict";n.d(t,{K7:function(){return d},bL:function(){return l}});n(6677);var a=n(7378),o=n(8314),r=(n(3351),n(5528),n(9680));const s=()=>"false"===localStorage.getItem(o.dR.mrKbdShortcutsEnabled);const i=e=>"Meta"===e.key||"Control"===e.key||"Alt"===e.key||"Shift"===e.key;function d(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"undefined"===typeof document?null:document.body,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=a.useRef([]);a.useEffect((()=>{const e=e=>{s()||i(e)&&!r.current.includes(e.key)&&r.current.push(e.key)},t=e=>{i(e)&&(r.current=r.current.filter((t=>t!==e.key)))};return document.addEventListener("keydown",e),document.addEventListener("keyup",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}}),[]),a.useEffect((()=>{const e=()=>{r.current=[]};return window.addEventListener("blur",e),()=>{window.removeEventListener("blur",e)}}),[]),a.useEffect((()=>{if(!n)return;const a=n=>{var a,i;s()||r.current.length>0||n.key===e&&("INPUT"!==(null===(a=document.activeElement)||void 0===a?void 0:a.nodeName)&&"TEXTAREA"!==(null===(i=document.activeElement)||void 0===i?void 0:i.nodeName)||o)&&t(n)};return n.addEventListener("keydown",a),()=>{n.removeEventListener("keydown",a)}}),[e,t,n,o])}const l=e=>{const t=(e=>null!==e[0])(e)?e:[window,{}];a.useEffect((()=>{const e=(0,r.ZP)(...t);return()=>{e()}}))}},283:function(e,t,n){"use strict";n.d(t,{R:function(){return a}});const a=(e,t,n)=>{const a=new URLSearchParams(t);a.forEach(((e,t)=>{""===e&&a.delete(t)}));const o=a.toString().length>0?`?${a.toString()}`:"";let r=e;return n&&Object.keys(n).length>0&&Object.entries(n).forEach((e=>{let[t,n]=e;r=r.replace(`:${t}`,n)})),r.endsWith("/")?`/api${r.slice(0,-1)}${o}`:`/api${r}${o}`}},8314:function(e,t,n){"use strict";n.d(t,{Cs:function(){return c},Kj:function(){return l},c5:function(){return d},dR:function(){return r},jw:function(){return i},qx:function(){return s},zU:function(){return o}});var a=n(4284);const o={ANNOTATIONS_BY_ID:"/annotations/:id/",ANNOTATIONS:"/annotations/",APPLE_SIGN_IN:"/apple_sign_in/",ARCHIVE_FEED:"/library_items/archive_feed/",AUTHORS_FEED:"/feed/authors/",BUG_REPORTS:"/bug_reports/",CLIENT_ERROR:"/_client/error",CLIENT_LOG:"/_client/log",CONTENTS_MY_ANNOTATIONS:"/contents/:id/my_annotations/",CONTENTS_TAGS:"/contents/tags/",CONTENTS:"/contents/:id/",FAVORITES_FEED:"/library_items/favorites_feed/",FEEDBACK:"/feedback/",HIGHLIGHTS_FEED:"/library_items/highlights_feed/",HISTORY_ENTRIES:"/history_entries/",LIBRARY_ENTRIES:"/library_entries/",LIKES:"/likes/",MAGIC_LOGIN_TRIGGER:"/magic_login/trigger/",MAGIC_LOGIN_EXCHANGE:"/magic_login/exchange/",NOTES:"/notes/",NOTE:"/notes/:id/",PROFILE:"/profile/",QR_EXCHANGE:"/qr_login/exchange/",QR_TRIGGER:"/qr_login/trigger/",QUEUE_FEED:"/library_items/queue_feed/",READER_VIEW:"/reader_view/",RECENT_FEED:"/library_items/recent_feed/",REFRESH_TOKEN_EXCHANGE:"/token/refresh/",SAVE:"/save/",SEARCH:"/search/",SOURCES:"/sources/",SUBSCRIPTION_FEED:"/profile/:profile_id/author_feed/",SUBSCRIPTIONS_FEED:"/feed/inbox/",SPEECH:"/speech/",STAFF_PICKS_FEED:"/feed/discover_split/",TAGS:"/tags/",TAGS_FEED:"/library_items/tags_feed/",TRACK:"/track/",UPDATES_FEED:"/library_items/updates_feed/"},r={mrAudioPlaybackRate:"mrAudioPlaybackRate",mrClipboardAccess:"mrClipboardAccess",mrColorScheme:"mrColorScheme",mrEntryContentWidth:"mrEntryContentWidth",mrEntryFontSize:"mrEntryFontSize",mrEntryLineHeight:"mrEntryLineHeight",mrFontFamily:"mrFontFamily",mrHasSeenExtHelp:"mrHasSeenExtHelp",mrHighlightsPanelActive:"mrHighlightsPanelActive",mrLastAuthRefreshDate:"mrLastAuthRefreshDate",mrKbdShortcutsEnabled:"mrKbdShortcutsEnabled",mrUserInputDrafts:"mrUserInputDrafts"},s={access_token:"access_token",refresh_token:"refresh_token",session_token:"session_token",extension_access_token:"extension_access_token",extension_refresh_token:"extension_refresh_token",mrProfileAccountId:"mrProfileAccountId",mrVersion:"mrVersion"},i={accountDoesNotExist:"That account does not exist. Please try a different method.",appleSignInFailed:"Sorry, sign in with Apple failed. Please try a different method.",archive:"Article archived",feedbackSubmitted:"Feedback submitted",magicSignInFailed:"Sorry, magic link sign in failed. Please try a different method.",deleted:"Article deleted",saved:"Article saved to queue",urlCopied:"Article URL copied to clipboard",saveToQueue:"URL saved. It will appear in your queue shortly.",queueSaveFailed:"URL failed to save. Please try again.",favorited:"Article added to favorites",unfavorited:"Article removed from favorites",annotationCopied:"Highlight copied to clipboard",noArticleError:"Sorry, we weren't able to parse that article.",audioLoading:"Article audio is loading...",audioFailed:"Sorry, the audio failed to play.",noInternet:"No internet connection",qrExpired:"Sorry, this QR code has expired. Please reload the page for a new one.",tagAdded:"Tag added"},d={LIBRARY_STATE_UNSAVED:0,LIBRARY_STATE_SAVED:1,LIBRARY_STATE_ARCHIVED:2,LIBRARY_STATE_DELETED:3},l="development",c={addTag:"addTag",saveUrl:"saveUrl",search:"search"};a.env.WEBSITE_ORIGIN},5590:function(e,t,n){"use strict";n.d(t,{Gg:function(){return a}});class a extends Error{constructor(e,t,n,a){super(e),this.name="HttpRequestError",t&&(this.url=t),n&&(this.status=n),a&&(this.info=a)}}Error;Error;Error},7713:function(e,t,n){"use strict";n.d(t,{_i:function(){return c},mA:function(){return m}});var a=n(8314);n(5528),n(7883);var o=n(283),r=(n(8552),n(5590)),s=n(1655);const i=async function(e){let{shouldSerializeError:t=!0,readWindowData:r=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i="string"===typeof e?{msg:e}:e;i.level=i.level||"info",i.time=Date.now();const d=i.error;if(d&&d instanceof Error)if(i.level="error",i.msg=d.message,t){const{serializeError:e}=await n.e(642).then(n.bind(n,9642));i.error=e(d)}else i.error=JSON.stringify(d,Object.getOwnPropertyNames(d));if(r){const e=s.Z.get(a.qx.mrProfileAccountId);i={...i,pathname:window.location.pathname,userAgent:window.navigator.userAgent,language:window.navigator.language,languages:window.navigator.languages,cookieEnabled:window.navigator.cookieEnabled,account_id:e?parseInt(e):-1}}const l=new Blob([JSON.stringify(i)],{type:"application/json; charset=UTF-8"});return navigator.sendBeacon((0,o.R)(a.zU.CLIENT_LOG),l),i};var d=n(9426);const l=async function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var o;const s=new Headers(null===(o=t[1])||void 0===o?void 0:o.headers);s.set("X-Matter-Web-App-Version",a.Kj),t[1]?t[1].headers=s:t[1]={headers:s};const l=new AbortController;t[1].signal=l.signal,(0,d.GN)(t[0],{status:"PENDING",controller:l});const c=await fetch(...t);if(c.status>=500){(0,d.GN)(t[0],{status:"FAILED"});const e="string"===typeof t[0]?t[0]:"Server error",n=new r.Gg(e,t[0],c.status);throw i({error:n}),n}if(!c.ok){(0,d.GN)(t[0],{status:"FAILED"});const e="string"===typeof t[0]?t[0]:"An error occurred while fetching the data.",n=new r.Gg(e,t[0],c.status);try{n.info=await c.json(),n.status=c.status}catch(m){throw i({error:m}),m}throw i({error:n}),n}{var u;(0,d.GN)(t[0],{status:"SUCCEEDED"});const e=t[0],n={msg:`HTTP ${(null===(u=t[1].method)||void 0===u?void 0:u.toUpperCase())||"GET"} ${e} ${c.status}`,ok:c.ok};i(n)}return c},c=async function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a;const o=await l(...t);return 204===o.status&&"DELETE"===(null===(a=t[1])||void 0===a?void 0:a.method)?{}:o.json()},u=async e=>c((0,o.R)(a.zU.CONTENTS_TAGS),{method:"PUT",body:JSON.stringify(e)}),m=async e=>{let{remove_tags:t,add_tags:n,content_ids:a}=e;const o=[];return t&&o.push((()=>u({content_ids:a,remove_tags:t}))),n&&o.push((()=>u({content_ids:a,add_tags:n}))),Promise.all(o.map((e=>e())))}},9426:function(e,t,n){"use strict";n.d(t,{GN:function(){return a},V7:function(){return r}});const a=(e,t)=>{if("string"!==typeof e)return;window.matter=window.matter||{requests:new Map};const n=window.matter.requests.get(e);window.matter.requests.set(e,{status:t.status,controller:t.controller||(null===n||void 0===n?void 0:n.controller)})},o=e=>{const t=(e=>{var t;const n=null===(t=window.matter)||void 0===t?void 0:t.requests.keys(),a=[];if(!n)return a;for(const r of n){var o;if(!r.startsWith(e))continue;const t=null===(o=window.matter)||void 0===o?void 0:o.requests.get(r);t&&a.push(t)}return a})(e);t.forEach((e=>{var t;"PENDING"===e.status&&(null===(t=e.controller)||void 0===t||t.abort())}))},r=()=>{const{pathname:e}=window.location;e.startsWith("/list/queue")?o("/api/library_items/queue_feed"):e.startsWith("/list/subscriptions")?o("/api/feed/inbox"):e.startsWith("/list/staff-picks")?o("/api/feed/discover_split"):e.startsWith("/list/favorites")?o("/api/library_items/favorites_feed"):e.startsWith("/list/highlights")?o("/api/library_items/highlights_feed"):e.startsWith("/list/archive")&&o("/api/library_items/archive_feed")}},5528:function(e,t,n){"use strict";n.d(t,{M8:function(){return a}});n(8314);const a=e=>void 0!==e&&["v10","v11"].includes(e)},7883:function(e,t,n){"use strict";n.d(t,{G6:function(){return s},LR:function(){return c},VO:function(){return u},_v:function(){return i},fz:function(){return d},qm:function(){return l}});n(1655);var a=n(8314),o=n(5528),r=n(4284);const s=()=>/^((?!chrome|android).)*safari/i.test(window.navigator.userAgent),i=((0,o.M8)(r.env.NEXT_PUBLIC_MATTER_API_VERSION)&&r.env.NEXT_PUBLIC_MATTER_API_VERSION,e=>new Promise((t=>setTimeout(t,e)))),d=(e,t)=>{const n=localStorage.getItem(a.dR.mrUserInputDrafts);return(n?JSON.parse(n):{})[`${t}-${e}`]},l=(e,t,n)=>{const o=localStorage.getItem(a.dR.mrUserInputDrafts),r=o?JSON.parse(o):{};r[`${t}-${e}`]={value:n,lastUpdatedDate:(new Date).toISOString()},localStorage.setItem(a.dR.mrUserInputDrafts,JSON.stringify(r))},c=(e,t)=>{const n=localStorage.getItem(a.dR.mrUserInputDrafts),o=n?JSON.parse(n):{};delete o[`${t}-${e}`],localStorage.setItem(a.dR.mrUserInputDrafts,JSON.stringify(o))},u=()=>{const e=new URLSearchParams(window.location.search);return e.get("url")?`/clientOnly/reader_view?url=${e.get("url")}`:""}},8268:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return $e}});var a=n(4246),o=n(7378),r=n(1369),s=n(7713),i=n(283),d=n(8314),l=(n(5590),n(9783)),c=n.n(l);const u=c()((async function(e,t){let a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(a){const{serializeError:a}=await n.e(642).then(n.bind(n,9642)),o=new Blob([JSON.stringify({error:a(e),info:t})],{type:"application/json; charset=UTF-8"});navigator.sendBeacon((0,i.R)(d.zU.CLIENT_ERROR),o)}else{const n=new Blob([JSON.stringify({error:{name:e.name,message:e.message},info:t})],{type:"application/json; charset=UTF-8"});navigator.sendBeacon((0,i.R)(d.zU.CLIENT_ERROR),n)}}),500);var m=n(7883);n(5528);n(2829),n(1967),n(6433),n(9928);var p=n(6131),f=n(2155),v=n(4628),E=n(9426);const _=e=>"object"===typeof e&&null!==e&&"id"in e&&"feed"in e,g=e=>"object"===typeof e&&null!==e&&(e=>"tags"in e&&Array.isArray(e.tags))(e),h=e=>{let{mutate:t,key:n,nextState:a,revalidate:o,remoteMutator:r,didRemoteMutate:s}=e;if(a&&"undefined"!==typeof r&&("undefined"===typeof s||!(null===s||void 0===s?void 0:s.current))){const e={optimisticData:a,populateCache:!1,rollbackOnError:!0,revalidate:!1,..."object"===typeof o?o:{}};return s&&(s.current=!0),t(n,r(a),e)}if(a)return t(n,(()=>a),o);u(new Error(`Attempted to mutate falsey data into cache at key ${n}`))},w=(e,t)=>({id:(0,f.x0)(),recommendations:[],annotations:[],feed_context:null,...t,content:{...e}}),y=e=>{let{key:t,mutate:n,revalidate:a,action:o,cacheGet:r,didRemoteMutate:s}=e;const i=window.structuredClone((()=>{switch(o.type){case"SET_ANNOTATION_ID":return r(t);case"ARCHIVE_ENTRY":case"FAVORITE_ENTRY":case"SAVE_ENTRY_TO_QUEUE":case"SET_ANNOTATION_NOTE":case"ADD_TAG_TO_ENTRY":case"DELETE_ANNOTATION":case"DELETE_ENTRY":case"DELETE_ENTRY_ANNOTATIONS":case"REMOVE_TAG_FROM_ENTRY":case"ADD_ANNOTATION":case"SET_READ_PERCENTAGE":case"SET_ENTRY_NOTE":case"UNFAVORITE_ENTRY":return o.payload.content;default:return o.payload}})());switch(o.type){case"ADD_ANNOTATION":{const e={...i,my_annotations:i.my_annotations.concat({...o.payload.annotation,created_date:(new Date).toISOString(),id:o.payload.annotation.id,note:o.payload.annotation.note||null,is_liked:!1})};return h({mutate:n,key:t,nextState:e,revalidate:a,remoteMutator:o.payload.remoteMutator})}case"ADD_TAG_TO_ENTRY":{const e={...i,tags:[o.payload.tag,...i.tags]};h({mutate:n,key:t,nextState:e,revalidate:a,remoteMutator:o.payload.remoteMutator});break}case"ARCHIVE_ENTRY":{const e=i.library||{},r={...i,library:{...e,library_state:d.c5.LIBRARY_STATE_ARCHIVED}};h({mutate:n,key:t,nextState:r,revalidate:a,remoteMutator:o.payload.remoteMutator});break}case"DELETE_ENTRY_ANNOTATIONS":{const e={...i,my_annotations:[],my_note:null};h({mutate:n,key:t,nextState:e,revalidate:a,remoteMutator:o.payload.remoteMutator,didRemoteMutate:s});break}case"DELETE_ANNOTATION":{const e={...i,my_annotations:i.my_annotations.filter((e=>e.id.toString()!==o.payload.annotationId))};h({mutate:n,key:t,nextState:e,revalidate:a,remoteMutator:o.payload.remoteMutator});break}case"DELETE_ENTRY":{const e=i.library||{},r={...i,library:{...e,library_state:d.c5.LIBRARY_STATE_DELETED}};h({mutate:n,key:t,nextState:r,revalidate:a,remoteMutator:o.payload.remoteMutator});break}case"FAVORITE_ENTRY":{const e=i.library||{},r={...i,library:{...e,is_favorited:!0}};h({mutate:n,key:t,nextState:r,revalidate:a,remoteMutator:o.payload.remoteMutator});break}case"REMOVE_TAG_FROM_ENTRY":{const e={...i,tags:i.tags.filter((e=>e.name!==o.payload.tagName))};h({mutate:n,key:t,nextState:e,revalidate:a,remoteMutator:o.payload.remoteMutator});break}case"SAVE_ENTRY_TO_QUEUE":{const e=i.library||{},r={...i,library:{...e,library_state:d.c5.LIBRARY_STATE_SAVED}};h({mutate:n,key:t,nextState:r,revalidate:a,remoteMutator:o.payload.remoteMutator});break}case"SET_ANNOTATION_ID":{const e={...i,my_annotations:i.my_annotations.map((e=>e.id===o.payload.oldId?{...e,id:o.payload.newId}:e))};h({mutate:n,key:t,nextState:e,revalidate:a});break}case"SET_ANNOTATION_NOTE":{const e={...i,my_annotations:i.my_annotations.map((e=>e.id===o.payload.annotation.id?{...e,note:o.payload.note}:e))};h({mutate:n,key:t,nextState:e,revalidate:a,remoteMutator:o.payload.remoteMutator,didRemoteMutate:s});break}case"SET_ENTRY_NOTE":{const e={...i,my_note:o.payload.note};h({mutate:n,key:t,nextState:e,revalidate:a,remoteMutator:o.payload.remoteMutator,didRemoteMutate:s});break}case"SET_READ_PERCENTAGE":{const e=i.history||{},r={...i,history:{...e,max_read_percentage:o.payload.max_read_percentage,last_read_percentage:o.payload.last_read_percentage}};h({mutate:n,key:t,nextState:r,revalidate:a});break}case"UNFAVORITE_ENTRY":{const e=i.library||{},r={...i,library:{...e,is_favorited:!1}};h({mutate:n,key:t,nextState:r,revalidate:a,remoteMutator:o.payload.remoteMutator});break}}},T=(e,t)=>{let n=-1;return t.every(((t,a)=>t.content.id!==e||(n=a,!1))),n},C=e=>{let{key:t,data:n,content:a,annotation:o}=e;const r=T(a.id,n.feed),s=window.structuredClone(n);if("/api/library_items/highlights_feed?page=1"===t){r>=0&&s.feed.splice(r,1);const e={...a,my_annotations:[...a.my_annotations,{...o,created_date:(new Date).toISOString(),id:o.id,note:null,is_liked:!1}]};s.feed.unshift(w(e))}else r>=0&&s.feed[r].content.my_annotations.push({...o,created_date:(new Date).toISOString(),id:o.id,note:null,is_liked:!1});return s},R=e=>{let{key:t,data:n,content:a}=e;const o=window.structuredClone(n);return"/api/library_items/queue_feed?page=1"===t&&o.feed.unshift(w(a)),o},N=e=>{let{key:t,data:n,content:a,tag:o}=e;const r=window.structuredClone(n),s=T(a.id,n.feed);if(t===`/api/library_items/tags_feed?page=1&tags=${o.name}`){const e={...a,tags:[o,...a.tags]};r.feed=[w(e),...r.feed]}else s>=0&&r.feed[s].content.tags.unshift(o);return r},A=e=>{let{key:t,data:n,content:a}=e;const o=window.structuredClone(n),r=T(a.id,n.feed);if("/api/library_items/archive_feed?page=1"===t){const e={...a,library:{...a.library,library_state:d.c5.LIBRARY_STATE_ARCHIVED}},t=o.feed[0];o.feed=[w(e,t),...n.feed]}else r>=0&&(t.startsWith("/api/library_items/queue_feed")||t.startsWith("/api/library_items/archive_feed")||t.startsWith("/api/feed/inbox"))?o.feed.splice(r,1):r>=0&&(o.feed[r].content.library={...o.feed[r].content.library,library_state:d.c5.LIBRARY_STATE_ARCHIVED});return o},x=e=>{let{content:t,data:n}=e;const a=window.structuredClone(n),o=T(t.id,n.feed);return o>=0&&(a.feed[o].content.my_annotations=[],a.feed[o].content.my_note=null),a},S=e=>{let{content:t,data:n,annotationId:a}=e;const o=window.structuredClone(n),r=T(t.id,n.feed);if(r>=0){const{my_annotations:e}=o.feed[r].content;o.feed[r].content.my_annotations=e.filter((e=>e.id.toString()!==a))}return o},k=e=>{let{data:t,content:n}=e;const a=window.structuredClone(t),o=T(n.id,t.feed);return o>=0&&a.feed.splice(o,1),a},b=e=>{let{key:t,content:n,data:a}=e;const o=window.structuredClone(a),r=T(n.id,a.feed);if("/api/library_items/favorites_feed?page=1"===t){const e={...n,library:{...n.library,is_favorited:!0}},t=o.feed[0];o.feed.unshift(w(e,t))}else r>=0&&t.startsWith("/api/library_items/favorites_feed")?o.feed.splice(r,1):r>=0&&(o.feed[r].content.library={...a.feed[r].content.library,is_favorited:!0});return o},I=e=>{let{data:t,content:n,tagName:a,key:o}=e;const r=window.structuredClone(t),s=T(n.id,t.feed);return o.includes(`tags=${a}`)?r.feed.splice(s,1):s>=0&&(r.feed[s].content.tags=r.feed[s].content.tags.filter((e=>e.name!==a))),r},O=e=>{let{key:t,content:n,data:a}=e;const o=window.structuredClone(a),r=T(n.id,a.feed);if("/api/library_items/queue_feed?page=1"===t){const e={...n,library:{...n.library,library_state:d.c5.LIBRARY_STATE_SAVED}},t=o.feed[0];o.feed.unshift(w(e,t))}else r>=0&&(t.startsWith("/api/library_items/archive_feed")||t.startsWith("/api/feed/inbox"))?o.feed.splice(r,1):r>=0&&(o.feed[r].content.library={...a.feed[r].content.library,library_state:d.c5.LIBRARY_STATE_SAVED});return o},M=e=>{let{data:t,content:n,oldId:a,newId:o}=e;const r=window.structuredClone(t),s=T(n.id,t.feed);if(s>=0){const e=r.feed[s].content.my_annotations;r.feed[s].content.my_annotations=e.map((e=>e.id===a?{...e,id:o}:e))}return r},L=e=>{let{data:t,content:n,note:a,annotation:o}=e;const r=window.structuredClone(t),s=T(n.id,t.feed);if(s>=0){r.feed[s].content.my_annotations.forEach((e=>{e.id===o.id&&(e.note=a)}))}return r},D=e=>{let{data:t,content:n,note:a}=e;const o=window.structuredClone(t),r=T(n.id,t.feed);return r>=0&&(o.feed[r].content.my_note=a),o},j=e=>{let{content:t,data:n,max_read_percentage:a,last_read_percentage:o}=e;const r=window.structuredClone(n),s=T(t.id,n.feed);return s>=0&&(r.feed[s].content.history={...r.feed[s].content.history,max_read_percentage:a,last_read_percentage:o}),r},P=e=>{let{key:t,content:n,data:a}=e;const o=window.structuredClone(a),r=T(n.id,a.feed);return r>=0&&t.startsWith("/api/library_items/favorites_feed")?o.feed.splice(r,1):r>=0&&(o.feed[r].content.library={...o.feed[r].content.library,is_favorited:!1}),o},H=()=>{const{mutate:e,cache:t}=(0,p.kY)(),{setToast:n}=o.useContext(v.u),a=o.useCallback((function(a){let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0;if(!window.navigator.onLine)return n({message:d.jw.noInternet}),!1;let s={current:!1},i=t.keys();"string"===typeof r?i=[...i].filter((e=>e===r)):"function"===typeof r&&(i=r([...i])),(0,E.V7)(),i=[...i];const l="ADD_ANNOTATION"===a.type||"ADD_TAG_TO_ENTRY"===a.type||"ARCHIVE_ENTRY"===a.type||"FAVORITE_ENTRY"===a.type||"DELETE_ANNOTATION"===a.type||"DELETE_ENTRY"===a.type||"DELETE_ENTRY_ANNOTATIONS"===a.type||"REMOVE_TAG_FROM_ENTRY"===a.type||"SAVE_ENTRY_TO_QUEUE"===a.type||"SET_READ_PERCENTAGE"===a.type||"SET_ANNOTATION_ID"===a.type||"SET_ANNOTATION_NOTE"===a.type||"SET_ENTRY_NOTE"===a.type||"UNFAVORITE_ENTRY"===a.type?a.payload.content:a.payload;for(const n of i)if(n===`/api/contents/${l.id}?markdown_format=matter_v1`||n&&n===(0,m.VO)()){const i=y({action:a,key:n,mutate:e,revalidate:o,cacheGet:t.get,didRemoteMutate:s});if("string"===typeof r)return i}else if("/api/tags"===n&&"ADD_TAG_TO_ENTRY"===a.type){const r=t.get(n);if(g(r)){const t={...r},s=t.tags.find((e=>e.name===a.payload.tag.name)),i=s?{...a.payload.tag,id:s.id,created_date:s.created_date}:a.payload.tag;t.tags=[i,...t.tags.filter((e=>e.name!==a.payload.tag.name))],h({mutate:e,key:n,nextState:t,revalidate:o})}}else if(n.startsWith("/api/library_items")||n.startsWith("/api/feed/inbox")||n.startsWith("/api/feed/discover_split")){const r=t.get(n);if(_(r))switch(a.type){case"ADD_ANNOTATION":{const t=C({key:n,data:r,content:l,annotation:a.payload.annotation});h({mutate:e,key:n,nextState:t,revalidate:o});break}case"ADD_ENTRY_TO_QUEUE":{const t=R({key:n,data:r,content:a.payload});h({mutate:e,key:n,nextState:t,revalidate:o});break}case"ADD_TAG_TO_ENTRY":{const t=N({key:n,data:r,content:a.payload.content,tag:a.payload.tag});h({mutate:e,key:n,nextState:t,revalidate:o});break}case"ARCHIVE_ENTRY":{const t=A({key:n,data:r,content:a.payload.content});h({mutate:e,key:n,nextState:t,revalidate:o});break}case"DELETE_ANNOTATION":{const t=S({data:r,content:l,annotationId:a.payload.annotationId});h({mutate:e,key:n,nextState:t,revalidate:o});break}case"DELETE_ENTRY_ANNOTATIONS":{const t=x({data:r,content:l});h({mutate:e,key:n,nextState:t,revalidate:o,remoteMutator:a.payload.remoteMutator,didRemoteMutate:s});break}case"DELETE_ENTRY":{const t=k({data:r,content:a.payload.content});h({mutate:e,key:n,nextState:t,revalidate:o});break}case"FAVORITE_ENTRY":{const t=b({key:n,data:r,content:a.payload.content});h({mutate:e,key:n,nextState:t,revalidate:o});break}case"REMOVE_TAG_FROM_ENTRY":{const t=I({data:r,content:a.payload.content,tagName:a.payload.tagName,key:n});h({mutate:e,key:n,nextState:t,revalidate:o});break}case"SAVE_ENTRY_TO_QUEUE":{const t=O({key:n,data:r,content:a.payload.content});h({mutate:e,key:n,nextState:t,revalidate:o});break}case"SET_ANNOTATION_ID":{const t=M({...a.payload,data:r});h({mutate:e,key:n,nextState:t,revalidate:o});break}case"SET_ANNOTATION_NOTE":{const t=L({data:r,content:l,note:a.payload.note,annotation:a.payload.annotation});h({mutate:e,key:n,nextState:t,revalidate:o,remoteMutator:a.payload.remoteMutator,didRemoteMutate:s});break}case"SET_ENTRY_NOTE":{const t=D({data:r,content:l,note:a.payload.note});h({mutate:e,key:n,nextState:t,revalidate:o,didRemoteMutate:s,remoteMutator:a.payload.remoteMutator});break}case"SET_READ_PERCENTAGE":{const t=j({data:r,...a.payload});h({mutate:e,key:n,nextState:t,revalidate:o});break}case"UNFAVORITE_ENTRY":{const t=P({key:n,data:r,content:a.payload.content});h({mutate:e,key:n,nextState:t,revalidate:o});break}}}}),[e,n,t]);return a},V=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return parseInt((0,f.kP)("123456789",e)())};var U=n(3355);n(1983);const Y=e=>{let{children:t,id:n,hidden:o,position:r="TOP",className:s="",shouldDelay:i=!0}=e;return(0,a.jsx)("span",{"data-position":r,"aria-hidden":o,id:n,role:"tooltip",className:`_1ku3a102 ednwsl33 ednwsl4x ednwsl45 ednwsl1h ednwsl4e ednwsl18 ednwsl53 ednwsl5e ednwsl7n ednwsl5p ednwsl80 ednwsl85 ednwsl4n ednwsl12 ednwsl8h ednwsl5s ednwsl8f ednwsl8l ${s}`,"data-should-delay":i,children:t})},F=e=>{let{children:t,tooltipProps:n,shouldAlert:o=!1,hidden:r,setHidden:s,...i}=e;return(0,a.jsxs)("span",{...i,className:`ednwsl5d ednwsl4g ednwsl8l ${i.className||""}`,children:[(0,a.jsx)(Y,{...n,hidden:!o&&r}),(0,a.jsx)("span",{className:"ednwsl5d ednwsl4g","aria-describedby":n.id,onMouseEnter:()=>s(!1),onMouseLeave:()=>s(!0),onFocusCapture:()=>{s(!1)},onBlurCapture:()=>{s(!0)},onClickCapture:()=>{s(!0)},children:t})]})},B=e=>{const[t,n]=o.useState(!0);return(0,a.jsx)(F,{...e,hidden:t,setHidden:n})};n(9034);var G="_1no42s72 ednwsl4p ednwsl4e ednwsl18 ednwsl53 ednwsl24 ednwsl30 ednwsl32 ednwsl4w";const z=e=>{let{keys:t,children:n,size:o="s",theme:r="dark",grouped:s=!1}=e;return t?(0,a.jsx)("span",{className:"ednwsl4e ednwsl8g",children:t.map((e=>(0,a.jsx)("kbd",{"data-theme":r,"data-size":o,"data-grouped":s,className:G,children:e},e)))}):(0,a.jsx)("kbd",{"data-size":o,"data-theme":r,"data-grouped":s,className:G,children:n})},$=(e,t,n)=>({id:t||V(),content_id:e,note:n||"",created_date:(new Date).toISOString(),modified_date:(new Date).toISOString()}),Z=e=>{let{note:t,noteId:n,noteNamespace:s,onSubmit:i,textareaId:d,setFormRef:l,formRef:c,className:u="",textareaClassName:p="",onTextareaFocus:f=(()=>{}),getInputDraft:v=m.fz,setInputDraft:E=m.qm,showSubmitTooltip:_=!0}=e;var g,h,w;const y=o.useRef(null);o.useEffect((()=>{y.current&&(y.current.focus(),y.current.selectionStart=y.current.value.length,y.current.selectionEnd=y.current.value.length),setTimeout((async()=>{let e=0;for(;e<=10;)e++,await(0,m._v)(10),y.current&&(y.current.focus(),y.current.selectionStart=y.current.value.length,y.current.selectionEnd=y.current.value.length)}),10)}),[]);const[T,C]=o.useState(0===((null===(g=v(n,s))||void 0===g?void 0:g.value)||t||"").length);return(0,a.jsxs)("form",{"data-note-form":!0,"data-replicated-value":(null===(h=v(n,s))||void 0===h?void 0:h.value)||t||"",className:`k7zmyr9 ednwsl4f ${u}`,onSubmit:i,ref:l,children:[(0,a.jsx)("textarea",{placeholder:"Take a note...",maxLength:1e4,ref:y,id:d,name:d,className:`k7zmyr7 ednwsl1f ednwsl3y ednwsl13 ednwsl4n ednwsl6e ednwsl7q ednwsl5z ednwsl23 ednwsl7g ednwsl5d ednwsl85 ${p}`,defaultValue:(null===(w=v(n,s))||void 0===w?void 0:w.value)||t||"",onChange:e=>{C(0===e.target.value.length),c&&(c.dataset.replicatedValue=e.target.value),E(n,s,e.target.value)},onKeyDown:e=>e.stopPropagation(),onFocus:f}),(0,a.jsx)(B,{className:"k7zmyre ednwsl60 ednwsl7l ednwsl6s",tooltipProps:{className:"k7zmyrh",children:_?(0,a.jsxs)(a.Fragment,{children:["Submit",(0,a.jsx)(z,{grouped:!0,keys:["\u2318","Enter"]})]}):null,id:`${d}-submit`,position:"LEFT"},children:(0,a.jsx)(r.h,{className:"ednwsl1m ednwsl3p","aria-label":"Submit",type:"submit",colorScheme:"interactive",size:"s",disabled:T,children:(0,a.jsx)("svg",{width:"11",height:"12",viewBox:"0 0 11 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.5 11.25C5.91421 11.25 6.25 10.9142 6.25 10.5V2.81065L8.96967 5.53032C9.26256 5.82322 9.73744 5.82322 10.0303 5.53032C10.3232 5.23743 10.3232 4.76256 10.0303 4.46966L6.03033 0.469663C5.73744 0.176769 5.26256 0.176769 4.96967 0.469663L0.96967 4.46966C0.676777 4.76256 0.676777 5.23743 0.96967 5.53032C1.26256 5.82322 1.73744 5.82322 2.03033 5.53032L4.75 2.81065V10.5C4.75 10.9142 5.08579 11.25 5.5 11.25Z",fill:"currentColor"})})})})]})};var W=n(1592),q=n(2466),Q=n.n(q),K=n(4056);const X=(e,t)=>new Promise(((n,a)=>{const o=t.get(e);return void 0!==o?n(o):a(`Memory cache miss for key: ${e}`)})),J=e=>new Promise(((t,n)=>{e&&"string"===typeof e&&(0,W.X3)("matter").then((a=>{a.get("keyvaluepairs",e).then((a=>void 0!==a?t(a):(console.warn("idb miss for key",e),n(`idb cache miss for key: ${e}`))))}))})),ee=async(e,t,n)=>{const a=await Promise.any([X(e,t),J(e)]);return a&&n(e,a,!1),a},te=function(e,t,n,a){for(var o=arguments.length,r=new Array(o>4?o-4:0),s=4;s<o;s++)r[s-4]=arguments[s];return new Promise((o=>{let s=!1;const i=Q()((()=>s));Promise.allSettled([Promise.race([ee(e,n,t),i]),a(...r).then((e=>(s=!0,e)))]).then((n=>{let[a,r]=n;if("fulfilled"===r.status)return t(e,r.value,!1),o(r.value)}))}))},ne=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const{mutate:a,cache:r,fetcher:s}=(0,p.kY)(),{appName:i}=o.useContext(K.z);if(!s)throw new Error("`usePersistentSWR` requires a global fetcher");const d=t[0],l=(0,p.ZP)(t[0],"BROWSER_EXTENSION"===i?s:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return te(d,a,r,s,...t)},"BROWSER_EXTENSION"===i?{revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1}:t[1]);return l};var ae=n(1296);function oe(){const{data:e}=ne((0,i.R)(d.zU.TAGS));return t=(null===e||void 0===e?void 0:e.tags)||[],[...t].sort(((e,t)=>(0,ae.Z)(new Date(e.last_used_date),new Date(t.last_used_date))?-1:1));var t}n(8509);const re=o.forwardRef(((e,t)=>(0,a.jsx)("input",{ref:t,type:"text",autoComplete:"off",...e,className:`_1ubfx1o1 ednwsl36 ednwsl4e ednwsl18 ednwsl4z ednwsl24 ednwsl30 ednwsl5z ednwsl59 ednwsl1k ednwsl3y ednwsl29 ${e.className?e.className:""}`})));re.displayName="ReffedTextInput";n(1979),n(5330);var se="_1s8xg1b ednwsl4y ednwsl4e ednwsl18 ednwsl4j ednwsl4c ednwsl81 ednwsl86 ednwsl12 ednwsl5z ednwsl5s ednwsl8l",ie=n(8781),de=n(3024);const le=e=>e.length,ce=e=>e.split(",").map((e=>e.trim())).filter(Boolean),ue=e=>{let{children:t}=e;return(0,a.jsx)("em",{className:"ednwsl3w",children:`\u201c${t}\u201d`})},me=e=>e.toLowerCase().trim(),pe=e=>{let{tags:t}=e;switch(t.length){case 0:return null;case 1:return(0,a.jsx)(ue,{children:t[0]});case 2:return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ue,{children:t[0]})," and ",(0,a.jsx)(ue,{children:t[1]})]});default:return(0,a.jsx)(a.Fragment,{children:t.map(((e,t,n)=>t+1===n.length?(0,a.jsx)(ue,{children:e},e):t+2===n.length?(0,a.jsxs)(o.Fragment,{children:[(0,a.jsx)(ue,{children:e}),(0,a.jsx)("span",{children:", and "})]},e):(0,a.jsxs)(o.Fragment,{children:[(0,a.jsx)(ue,{children:e},e),(0,a.jsx)("span",{children:", "})]},e)))})}},fe=e=>{let{mutateEntryInCaches:t,content:n,tag:a,onSubmit:o,shouldPostTagUpdates:r,remoteMutator:i}=e;t({type:"ADD_TAG_TO_ENTRY",payload:{content:n,tag:{...a,last_used_date:(new Date).toISOString()},remoteMutator:i}}),r&&(0,s.mA)({add_tags:[a.name],content_ids:[n.id]}),o&&o()},ve=e=>{let{mutateEntryInCaches:t,content:n,tag:a,onSubmit:o,shouldPostTagUpdates:r,remoteMutator:i}=e;t({type:"REMOVE_TAG_FROM_ENTRY",payload:{content:n,tagName:a.name,remoteMutator:i}}),r&&(0,s.mA)({remove_tags:[a.name],content_ids:[n.id]}),o&&o()},Ee=e=>{let{activeTagIdx:t,idx:n,setActiveTagIdx:r,setTagToAdd:s,tag:i,virtualRow:d,name:l,content:c,shouldPostTagUpdates:u,remoteMutator:p}=e;const f=o.useRef(null),v=o.useRef(!0);o.useEffect((()=>{var e;v.current?v.current=!1:t===n&&(null===(e=f.current)||void 0===e||e.focus())}),[t,n]);const E=(0,m.G6)()?{onChange:()=>{}}:{readOnly:!0},_=H();return(0,a.jsxs)("div",{"data-active":t===n,className:se,onMouseEnter:()=>{r(n)},style:{position:"absolute",top:0,left:0,width:"100%",height:`${d.size}px`,transform:`translateY(${d.start}px)`},onClick:e=>{e.stopPropagation(),f.current&&!f.current.checked?fe({mutateEntryInCaches:_,content:c,tag:i,shouldPostTagUpdates:u,remoteMutator:p}):f.current&&f.current.checked&&(ve({mutateEntryInCaches:_,content:c,tag:i,shouldPostTagUpdates:u,remoteMutator:p}),s(""))},children:[(0,a.jsx)("input",{...E,"data-input-tag":!0,"data-idx":n,id:`tag--checkbox--${l}`,name:`tag--checkbox--${l}`,className:"_1s8xg14 ednwsl31 ednwsl5d ednwsl4c ednwsl66 ednwsl6n",ref:f,type:"checkbox",checked:Boolean(c.tags.find((e=>e.name===i.name))),onClick:e=>{e.stopPropagation(),e.target.checked?fe({mutateEntryInCaches:_,content:c,tag:i,shouldPostTagUpdates:u,remoteMutator:p}):(ve({mutateEntryInCaches:_,content:c,tag:i,shouldPostTagUpdates:u,remoteMutator:p}),s(""))},onFocus:()=>{t!==n&&r(n)}}),(0,a.jsx)("label",{className:"ednwsl4c",onClick:e=>{e.stopPropagation()},htmlFor:`tag--checkbox--${l}`,children:i.name})]})},_e=e=>{let{tagToAdd:t,tags:n,contentId:o,setActiveTagIdx:r,filteredTags:s,addTagButtonRef:i,activeTagIdx:d}=e;const l=n.map((e=>me(e.name)));return t&&!l.includes(me(t))?(0,a.jsxs)("button",{type:"submit",form:`${o}-tags`,onMouseEnter:()=>r(le(s)),className:se,"data-active":d===le(s),ref:i,children:[(0,a.jsx)(ie.X,{className:"_1s8xg16 ednwsl6n ednwsl4w ednwsl5v"}),"Create new ",t.includes(",")?"tags":"tag",":"," ",(0,a.jsx)("span",{className:"ednwsl4d ednwsl5s",children:(0,a.jsx)(pe,{tags:ce(t)})})]}):null},ge=e=>{let{tagToAdd:t,setTagToAdd:n,activeTagIdx:r,setActiveTagIdx:s,addTagsInputRef:i,containerRef:l,arrowDown:c,arrowUp:u,autoFocus:m=!1,filteredTags:p,content:f,onSubmit:v,shouldPostTagUpdates:E,tags:_,remoteMutator:g,className:h=""}=e;const w=o.useRef(null),y=(0,de.o)({size:p.length,parentRef:w,estimateSize:o.useCallback((()=>30),[])}),T=o.useRef(null);o.useEffect((()=>{var e,t;r===le(p)&&(null===(e=document.activeElement)||void 0===e?void 0:e.id)!==d.Cs.addTag&&(null===(t=T.current)||void 0===t||t.focus())}),[r,p]);const C=H();return f?(0,a.jsxs)("div",{"data-tags-menu":!0,className:h,onKeyDown:e=>{var n,a;if(e.stopPropagation(),"ArrowDown"!==e.key)if("ArrowUp"!==e.key)if(" "===e.key&&0===t.length&&p[0]&&0===r&&(e.preventDefault(),p[0])){f.tags.find((e=>me(e.name)===me(p[0].name)))?ve({mutateEntryInCaches:C,content:f,tag:p[0],shouldPostTagUpdates:E,remoteMutator:g}):fe({mutateEntryInCaches:C,content:f,tag:p[0],shouldPostTagUpdates:E,remoteMutator:g})}else"Meta"!==e.key&&" "!==e.key&&"Tab"!==e.key&&"Shift"!==e.key&&"Escape"!==e.key&&"Control"!==e.key&&"Alt"!==e.key&&(null===(n=document.activeElement)||void 0===n?void 0:n.id)!==d.Cs.saveUrl&&(null===(a=i.current)||void 0===a||a.focus());else u(e);else c(e)},ref:l,children:[(0,a.jsx)("div",{className:"_1s8xg1f ednwsl70",children:(0,a.jsx)("form",{id:`${f.id}-tags`,className:"_1s8xg19 ednwsl51 ednwsl7d ednwsl6n ednwsl4k",onSubmit:e=>{if(e.preventDefault(),p.length>0&&p[r])return void(p[r].checked?ve({mutateEntryInCaches:C,content:f,tag:p[r],onSubmit:v,shouldPostTagUpdates:E,remoteMutator:g}):fe({mutateEntryInCaches:C,content:f,tag:p[r],onSubmit:v,shouldPostTagUpdates:E,remoteMutator:g}));const n=ce(t);n.length>0&&n.forEach((e=>{const t={name:e,checked:!0,id:V(),created_date:(new Date).toISOString(),last_used_date:(new Date).toISOString()};fe({mutateEntryInCaches:C,content:f,tag:t,onSubmit:v,shouldPostTagUpdates:E,remoteMutator:g})}))},children:(0,a.jsx)(re,{autoFocus:m,"aria-label":"Filter or add tags",ref:i,value:t,onChange:e=>{let{target:t}=e;n(t.value)},id:d.Cs.addTag,name:d.Cs.addTag,type:"text",placeholder:"Filter tags"})})}),(0,a.jsx)("div",{ref:w,className:"_1s8xg11 ednwsl5d _156wemy0",children:(0,a.jsx)("div",{className:"ednwsl5z ednwsl5d ednwsl59",style:{height:`${y.totalSize}px`},children:y.virtualItems.map((e=>(0,a.jsx)(Ee,{virtualRow:e,tag:p[e.index],idx:e.index,setActiveTagIdx:s,setTagToAdd:n,activeTagIdx:r,checked:p[e.index].checked,name:p[e.index].name,tags:p,content:f,shouldPostTagUpdates:E,remoteMutator:g},e.index)))})}),(0,a.jsx)(_e,{tagToAdd:t,tags:_,contentId:f.id,setActiveTagIdx:s,filteredTags:p,addTagButtonRef:T,activeTagIdx:r})]}):null},he=e=>{let{autoFocus:t,onSubmit:n,content:r,shouldPostTagUpdates:s=!0,remoteMutator:i,className:d=""}=e;const l=(e=>{let{content:t,autoFocus:n=!1}=e;const[a,r]=o.useState(""),[s,i]=o.useState(0),d=o.useRef(null),l=o.useRef(null),c=oe(),u=o.useRef([...c].map((e=>({...e,checked:!!t&&Boolean(t.tags.find((t=>t.name===e.name)))})))),[m,p]=o.useState(c.length>0);o.useEffect((()=>{c.length>0&&!m&&(u.current=[...c].map((e=>({...e,checked:!!t&&Boolean(t.tags.find((t=>t.name===e.name)))}))),p(!0))}),[c,t,m]);const f=o.useRef(!0);f.current&&u.current.length>0&&c.length>0&&(f.current=!1,u.current.sort(((e,t)=>e.checked&&!t.checked?-1:!e.checked&&t.checked?1:0)));const v=u.current,E=v.filter((e=>""===a.trim()?e:me(e.name).includes(me(a)))),_=o.useCallback((e=>{e.preventDefault(),e.stopPropagation(),i((e=>e+1>=le(E)?le(E):e+1))}),[E]),g=o.useCallback((e=>{e.preventDefault(),e.stopPropagation(),i((e=>e-1<0?0:e-1))}),[]);return{setTagToAdd:r,tagToAdd:a,activeTagIdx:s,setActiveTagIdx:i,addTagsInputRef:d,containerRef:l,arrowDown:_,arrowUp:g,autoFocus:n,tags:v,filteredTags:E}})({content:r,autoFocus:t});return(0,a.jsx)(ge,{...l,content:r,onSubmit:n,shouldPostTagUpdates:s,remoteMutator:i,className:d})};n(2968);const we=e=>(0,a.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.95 8.99999C13.95 9.74558 14.5544 10.35 15.3 10.35C16.0456 10.35 16.65 9.74558 16.65 8.99999C16.65 8.25441 16.0456 7.64999 15.3 7.64999C14.5544 7.64999 13.95 8.25441 13.95 8.99999ZM1.3501 9.00002C1.3501 9.7456 1.95451 10.35 2.7001 10.35C3.44568 10.35 4.0501 9.7456 4.0501 9.00002C4.0501 8.25443 3.44568 7.65002 2.7001 7.65002C1.95451 7.65002 1.3501 8.25443 1.3501 9.00002ZM2.47782 9.87236C2.54892 9.89042 2.62339 9.90002 2.7001 9.90002C3.19715 9.90002 3.6001 9.49707 3.6001 9.00002C3.6001 8.57964 3.31188 8.22658 2.92228 8.12765C3.31183 8.22661 3.6 8.57965 3.6 8.99999C3.6 9.49705 3.19706 9.89999 2.7 9.89999C2.62332 9.89999 2.54889 9.8904 2.47782 9.87236ZM7.65 8.99999C7.65 9.74558 8.25442 10.35 9 10.35C9.74558 10.35 10.35 9.74558 10.35 8.99999C10.35 8.25441 9.74558 7.64999 9 7.64999C8.25442 7.64999 7.65 8.25441 7.65 8.99999Z",fill:"currentColor"})});var ye=n(5218),Te=n.n(ye),Ce=n(6677),Re=(n(7062),"_11nkaipj ednwsl3d ednwsl7p ednwsl7u"),Ne={relative:"ednwsl5d",static:"_11nkaip1"},Ae="_11nkaipq _11nkaipo ednwsl4e ednwsl18 ednwsl5z ednwsl8i ednwsl4y ednwsl13 ednwsl4c ednwsl5s",xe="_11nkaipr",Se={NONE:"_11nkaipc",TOP_LEFT:"_11nkaipd ednwsl5k",BOTTOM_RIGHT:"_11nkaipe ednwsl5q",TOP_RIGHT:"_11nkaipf ednwsl5k"},ke={319:"_11nkaip4",m:"_11nkaip5",l:"_11nkaip6",xl:"_11nkaip7",xxl:"_11nkaip8"};const be=e=>{let{popoverClassName:t,popoverSize:n="m",position:r,heading:s,mapChildren:i,children:d,contentType:l,childClassName:c,open:u,asModal:m=!1}=e;const p=m?{role:"dialog","aria-modal":!0}:{},f=o.useRef(null),v=o.useRef([]);o.useEffect((()=>{var e;v.current=Array.from((null===(e=f.current)||void 0===e?void 0:e.querySelectorAll("a, button"))||[])}),[]);const E=o.useCallback((e=>{var t;if(!u||!v.current||0===v.current.length)return;e.preventDefault(),e.stopPropagation();const n=v.current.reduce(((e,t,n)=>t===document.activeElement?n:e),-1);-1!==n&&n!==v.current.length?null===(t=v.current[n+1])||void 0===t||t.focus():v.current[0].focus()}),[u]);(0,U.K7)("ArrowDown",E);const _=o.useCallback((e=>{var t;if(!u||!v.current||0===v.current.length)return;e.preventDefault(),e.stopPropagation();const n=v.current.reduce(((e,t,n)=>t===document.activeElement?n:e),-1);-1!==n&&0!==n?null===(t=v.current[n-1])||void 0===t||t.focus():v.current[0].focus()}),[u]);return(0,U.K7)("ArrowUp",_),(0,a.jsxs)("div",{className:`_11nkaiph ednwsl1f ednwsl3h ednwsl3y ednwsl5e ednwsl36 ednwsl7n ednwsl8f ednwsl8m ednwsl8k ednwsl63 ednwsl59 ${ke[n]} ${Se[r]} ${t} popoverContent`,"data-position":r,"data-open":u,"data-popover":!0,"data-size":n,"aria-hidden":!u,ref:f,...p,children:[s&&(0,a.jsx)("header",{"data-content-type":l,className:"_11nkaipj ednwsl3d ednwsl7p ednwsl7u",children:(0,a.jsx)("h3",{className:"ednwsl12 ednwsl4q",children:s})}),i?o.Children.map(d,(e=>e?(0,a.jsx)("div",{"data-content-type":l,"data-child":!0,"data-size":n,className:`${Re} ${c}`,children:e}):null)):(0,a.jsx)("div",{"data-size":n,"data-content-type":l,className:`${Re} ${c}`,children:d})]})},Ie=Te()((()=>n.e(952).then(n.bind(n,8952))),{loadableGenerated:{webpack:()=>[8952]}}),Oe=e=>{let{heading:t,children:n,opener:r,position:s,popoverClassName:i="",popoverSize:d="m",containerClassName:l="",childClassName:c="",controlledOpen:u,renderChildrenOnlyWhenOpen:m=!1,mapChildren:p=!0,contentType:f="",id:v,closeOnInsideClick:E=!1,toggleOnHover:_=!1,containerPosition:g="relative"}=e;const{open:h,setOpen:w,containerRef:y}=(e=>{let{controlledOpen:t,id:n}=e;const{pathname:a}=(0,Ce.useRouter)(),[r,s]=o.useState(a);let[i,d]=o.useState(!1);t&&(i=t.open,d=t.setOpen);const l=o.useRef(null);o.useEffect((()=>{a!==r&&(s(a),d(!1))}),[a,r,d]);const c=o.useCallback((e=>{l.current&&"true"===l.current.getAttribute("data-open")&&(e.stopPropagation(),d(!1))}),[d]);return(0,U.K7)("Escape",c,"undefined"!==typeof document?document.body:null,!0),o.useEffect((()=>{const e=e=>{d((t=>!(t&&e.target&&e.target instanceof HTMLElement&&!(e.target.closest(".popover")||e.target.classList.contains("popover")||e.target.closest("button")||"BUTTON"===e.target.nodeName||"button"===e.target.getAttribute("role")))&&t))};return window.addEventListener("click",e),()=>{window.removeEventListener("click",e)}}),[d]),o.useEffect((()=>{i&&window.dispatchEvent(new CustomEvent("MATTER:OPEN_POPOVER",{detail:{id:n}}))}),[i,n]),o.useEffect((()=>{const e=e=>{e.detail.id!==n&&d(!1)};return window.addEventListener("MATTER:OPEN_POPOVER",e),()=>{window.removeEventListener("MATTER:OPEN_POPOVER",e)}}),[n,d]),{open:i,setOpen:d,containerRef:l}})({controlledOpen:u,id:v});return(0,a.jsxs)("div",{className:`${Ne[g]} ${l} popover`,ref:y,"data-open":h.toString(),onClick:()=>{E&&h&&w(!1)},children:[r({open:h,setOpen:w}),(!m||m&&h)&&(0,a.jsx)(Ie,{autoFocus:!1,children:(0,a.jsx)(be,{popoverClassName:i,popoverSize:d,position:s,heading:t,mapChildren:p,children:n,contentType:f,childClassName:c,open:h,asModal:!0})})]})},Me=e=>(0,a.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.39999 2.8001H13.6C13.8209 2.8001 14 2.97918 14 3.2001V4.0001C14 4.22101 13.8209 4.40009 13.6 4.4001V4.4H2.4V4.4001H2.39999C2.17907 4.4001 1.99999 4.22101 1.99999 4.0001V3.2001C1.99999 2.97918 2.17907 2.8001 2.39999 2.8001ZM2.4 5.6001H2.39999C1.51633 5.6001 0.799988 4.88375 0.799988 4.0001V3.2001C0.799988 2.31644 1.51633 1.6001 2.39999 1.6001H13.6C14.4836 1.6001 15.2 2.31644 15.2 3.2001V4.0001C15.2 4.88375 14.4837 5.60009 13.6 5.6001V12.8C13.6 13.6837 12.8837 14.4 12 14.4H4C3.11634 14.4 2.4 13.6837 2.4 12.8V5.6001ZM3.6 5.6001V12.8C3.6 13.0209 3.77909 13.2 4 13.2H12C12.2209 13.2 12.4 13.0209 12.4 12.8V5.6001H3.6ZM6.0666 8C6.0666 7.66863 6.33523 7.4 6.6666 7.4H9.33327C9.66464 7.4 9.93327 7.66863 9.93327 8C9.93327 8.33137 9.66464 8.6 9.33327 8.6H6.6666C6.33523 8.6 6.0666 8.33137 6.0666 8Z",fill:"currentColor"})}),Le=e=>(0,a.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.66719 3.66746L9.15611 3.42881L15.7365 10.0092L10.009 15.7368L3.42854 9.15638L3.66719 3.66746ZM2.33397 9.971C2.15559 9.79261 2.06026 9.54755 2.07122 9.29551L2.33638 3.19671C2.35666 2.73037 2.7301 2.35693 3.19644 2.33666L9.29524 2.07149C9.54727 2.06053 9.79234 2.15586 9.97073 2.33424L17.0093 9.37285C17.3608 9.72432 17.3608 10.2942 17.0093 10.6456L10.6454 17.0096C10.2939 17.3611 9.72405 17.3611 9.37258 17.0096L2.33397 9.971ZM6.82711 6.82741C7.17858 6.47594 7.17858 5.90609 6.82711 5.55462C6.47564 5.20315 5.90579 5.20315 5.55432 5.55462C5.20284 5.90609 5.20284 6.47594 5.55432 6.82741C5.90579 7.17888 6.47564 7.17888 6.82711 6.82741Z",fill:"currentColor"})});o.createContext({audioContext:{current:null},isPaused:!0,setIsPaused:()=>{},playerRef:{current:null},contentId:-1,setContentId:()=>{},text:"",setText:()=>{},playbackRate:1,setPlaybackRate:()=>{}});n(7878);const De=e=>(0,a.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.61958 2.61943C6.63208 2.60693 6.64903 2.5999 6.66672 2.5999H9.33338C9.35106 2.5999 9.36802 2.60693 9.38052 2.61943C9.39302 2.63193 9.40005 2.64889 9.40005 2.66657V4.0667H6.60005V2.66657C6.60005 2.64889 6.60707 2.63193 6.61958 2.61943ZM5.40005 4.0667V2.66657C5.40005 2.33063 5.5335 2.00845 5.77105 1.7709C6.00859 1.53335 6.33077 1.3999 6.66672 1.3999H9.33338C9.66932 1.3999 9.9915 1.53335 10.229 1.7709C10.4666 2.00845 10.6 2.33063 10.6 2.66657V4.0667H12.6659H13.3333C13.6647 4.0667 13.9333 4.33533 13.9333 4.6667C13.9333 4.99807 13.6647 5.2667 13.3333 5.2667H13.2187L12.5998 12.694C12.5927 13.1969 12.3898 13.6777 12.0337 14.0338C11.6711 14.3964 11.1794 14.6001 10.6666 14.6001H5.33329C4.82053 14.6001 4.32878 14.3964 3.96621 14.0338C3.61007 13.6777 3.40723 13.1969 3.40014 12.694L2.7812 5.2667H2.66665C2.33528 5.2667 2.06665 4.99807 2.06665 4.6667C2.06665 4.33533 2.33528 4.0667 2.66665 4.0667H3.33396H5.40005ZM4.59788 12.6169L3.98536 5.2667H12.0145L11.402 12.6169C11.4006 12.6335 11.4 12.6501 11.4 12.6667C11.4 12.8612 11.3227 13.0478 11.1852 13.1853C11.0476 13.3228 10.8611 13.4001 10.6666 13.4001H5.33329C5.13879 13.4001 4.95227 13.3228 4.81474 13.1853C4.67721 13.0478 4.59995 12.8612 4.59995 12.6667C4.59995 12.6501 4.59926 12.6335 4.59788 12.6169ZM6.66665 6.73311C6.99802 6.73311 7.26665 7.00173 7.26665 7.33311V11.3331C7.26665 11.6645 6.99802 11.9331 6.66665 11.9331C6.33528 11.9331 6.06665 11.6645 6.06665 11.3331V7.33311C6.06665 7.00173 6.33528 6.73311 6.66665 6.73311ZM9.93345 7.33311C9.93345 7.00173 9.66482 6.73311 9.33345 6.73311C9.00208 6.73311 8.73345 7.00173 8.73345 7.33311V11.3331C8.73345 11.6645 9.00208 11.9331 9.33345 11.9331C9.66482 11.9331 9.93345 11.6645 9.93345 11.3331V7.33311Z",fill:"currentColor"})});n(3351);n(3390);const je=e=>(0,a.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.0502 2.70001H4.9502C4.45314 2.70001 4.0502 3.10295 4.0502 3.60001V14.4C4.0502 14.8971 4.45314 15.3 4.9502 15.3H10.575V12.6C10.575 11.9787 11.0787 11.475 11.7 11.475H13.9502V3.60001C13.9502 3.10295 13.5473 2.70001 13.0502 2.70001ZM13.616 12.825H11.925V14.516L13.616 12.825ZM4.9502 1.35001H13.0502C14.2928 1.35001 15.3002 2.35737 15.3002 3.60001V12.118C15.3002 12.7148 15.0631 13.2871 14.6412 13.709L12.3592 15.991C11.9372 16.413 11.365 16.65 10.7682 16.65H4.9502C3.70755 16.65 2.7002 15.6426 2.7002 14.4V3.60001C2.7002 2.35737 3.70755 1.35001 4.9502 1.35001ZM5.4 5.17503C5.4 4.80224 5.70221 4.50003 6.075 4.50003H11.925C12.2978 4.50003 12.6 4.80224 12.6 5.17503C12.6 5.54782 12.2978 5.85003 11.925 5.85003H6.075C5.70221 5.85003 5.4 5.54782 5.4 5.17503ZM6.075 7.20003C5.70221 7.20003 5.4 7.50224 5.4 7.87503C5.4 8.24782 5.70221 8.55003 6.075 8.55003H11.925C12.2978 8.55003 12.6 8.24782 12.6 7.87503C12.6 7.50224 12.2978 7.20003 11.925 7.20003H6.075ZM5.4 10.575C5.4 10.2022 5.70221 9.90003 6.075 9.90003H9.225C9.59779 9.90003 9.9 10.2022 9.9 10.575C9.9 10.9478 9.59779 11.25 9.225 11.25H6.075C5.70221 11.25 5.4 10.9478 5.4 10.575Z",fill:"currentColor"})}),Pe=e=>(0,a.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.8154 9.29964L15.1614 7.00767C15.8265 6.35779 15.4576 5.22707 14.5371 5.09447L11.2909 4.62662C10.9253 4.57399 10.6092 4.34471 10.4454 4.01386L8.99037 1.07454C8.57787 0.240929 7.38861 0.242447 6.97796 1.0769L5.5299 4.01976C5.36692 4.35112 5.05126 4.58107 4.68582 4.63455L1.4408 5.10999C0.520467 5.24479 0.15436 6.37635 0.821114 7.02471L3.17213 9.31111C3.43701 9.56857 3.55798 9.93991 3.49606 10.304L2.94555 13.5372C2.78949 14.454 3.7525 15.152 4.57515 14.7182L7.47634 13.1885C7.80297 13.0162 8.19354 13.0159 8.52067 13.1873L11.4254 14.7099C12.2492 15.1417 13.2104 14.4415 13.0521 13.5251L12.4939 10.2932C12.4311 9.92928 12.5512 9.55777 12.8154 9.29964ZM11.8696 13.7293L11.8428 13.5738L11.9824 13.647C11.9817 13.6467 11.9765 13.6444 11.9674 13.6426C11.9573 13.6407 11.9466 13.6402 11.9364 13.6411C11.917 13.643 11.9059 13.6492 11.9005 13.6531C11.8952 13.657 11.8858 13.6657 11.8781 13.6836C11.8741 13.693 11.8713 13.7033 11.87 13.7136C11.8688 13.7241 11.8698 13.7299 11.8696 13.7293ZM6.91656 12.127C7.59294 11.7703 8.40111 11.7699 9.07762 12.1244L11.8428 13.5738L11.3114 10.4975C11.1816 9.74476 11.4299 8.97561 11.9768 8.4413L14.2098 6.25969L11.1199 5.81438C11.1199 5.81437 11.12 5.81438 11.1199 5.81438C10.3632 5.70537 9.70888 5.23081 9.36996 4.54634L7.98496 1.74839L6.60669 4.54939C6.60666 4.54945 6.60672 4.54933 6.60669 4.54939C6.26936 5.23508 5.61605 5.71114 4.85978 5.82188C4.85972 5.82189 4.85984 5.82187 4.85978 5.82188L1.77085 6.27444L4.00851 8.45061C4.00859 8.45069 4.00844 8.45053 4.00851 8.45061C4.55688 8.98377 4.80709 9.75242 4.67907 10.5052L4.155 13.5831L6.91656 12.127ZM1.61473 6.29731C1.61465 6.29732 1.61464 6.29733 1.61473 6.29731ZM11.8696 13.7293L11.9462 13.7161Z",fill:"currentColor"})}),He=e=>{let{content:t,toggleIsFavorite:n}=e;var r,s;const{appName:i}=o.useContext(K.z);return(0,a.jsxs)("button",{onClick:n,className:Ae,children:[(null===(r=t.library)||void 0===r?void 0:r.is_favorited)?(0,a.jsx)(ie.R,{className:xe}):(0,a.jsx)(Pe,{className:xe}),(null===(s=t.library)||void 0===s?void 0:s.is_favorited)?"Remove from favorites":"Add to favorites","WEB_APP"===i&&(0,a.jsx)("span",{className:"ednwsl7l",children:(0,a.jsx)(z,{children:"F"})})]})},Ve=e=>(0,a.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.1781 14.7852C12.444 14.9624 12.8 14.7719 12.8 14.4524V3.19981C12.8 1.87432 11.7255 0.799805 10.4 0.799805H5.60001C4.27453 0.799805 3.20001 1.87432 3.20001 3.1998V14.4524C3.20001 14.7719 3.55607 14.9624 3.82189 14.7852L7.77813 12.1477C7.91249 12.0582 8.08753 12.0582 8.22189 12.1477L12.1781 14.7852ZM11.6 12.9576V3.19981C11.6 2.53706 11.0628 1.9998 10.4 1.9998H5.60001C4.93727 1.9998 4.40001 2.53706 4.40001 3.1998V12.9576L7.11249 11.1493C7.64993 10.791 8.35009 10.791 8.88753 11.1493L11.6 12.9576Z",fill:"currentColor"})}),Ue=e=>(0,a.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.99998 2.8001C3.99998 2.13736 4.53723 1.6001 5.19998 1.6001H10.8C11.4627 1.6001 12 2.13736 12 2.8001H3.99998ZM3.59998 6.0001H12.4C13.5045 6.0001 14.4 6.89553 14.4 8.0001V14.0001C14.4 15.1047 13.5045 16.0001 12.4 16.0001H3.59998C2.49541 16.0001 1.59998 15.1047 1.59998 14.0001V8.0001C1.59998 6.89553 2.49541 6.0001 3.59998 6.0001ZM3.59998 7.2001C3.15815 7.2001 2.79998 7.55827 2.79998 8.0001V14.0001C2.79998 14.4419 3.15815 14.8001 3.59998 14.8001H12.4C12.8418 14.8001 13.2 14.4419 13.2 14.0001V8.0001C13.2 7.55827 12.8418 7.2001 12.4 7.2001H3.59998ZM4.40001 3.6001H11.6C12.5676 3.6001 13.3747 4.2872 13.56 5.2001H12.293C12.1547 4.96098 11.8961 4.8001 11.6 4.8001H4.40001C4.10389 4.8001 3.84536 4.96098 3.70703 5.2001H2.44001C2.62532 4.2872 3.43242 3.6001 4.40001 3.6001Z",fill:"currentColor"})}),Ye=e=>(0,a.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 2.4002H11.2C11.6418 2.4002 12 2.75837 12 3.2002V12.8002C12 13.242 11.6418 13.6002 11.2 13.6002H4C3.55817 13.6002 3.2 13.242 3.2 12.8002V3.2002C3.2 2.75837 3.55817 2.4002 4 2.4002ZM2 3.2002C2 2.09563 2.89543 1.2002 4 1.2002H11.2C12.3046 1.2002 13.2 2.09563 13.2 3.2002V12.8002C13.2 13.9048 12.3046 14.8002 11.2 14.8002H4C2.89543 14.8002 2 13.9048 2 12.8002V3.2002ZM5 4C4.66863 4 4.4 4.26863 4.4 4.6C4.4 4.93137 4.66863 5.2 5 5.2H10.2C10.5314 5.2 10.8 4.93137 10.8 4.6C10.8 4.26863 10.5314 4 10.2 4H5ZM4.4 7C4.4 6.66863 4.66863 6.4 5 6.4H10.2C10.5314 6.4 10.8 6.66863 10.8 7C10.8 7.33137 10.5314 7.6 10.2 7.6H5C4.66863 7.6 4.4 7.33137 4.4 7ZM5 8.8C4.66863 8.8 4.4 9.06863 4.4 9.4C4.4 9.73137 4.66863 10 5 10H8.2C8.53137 10 8.8 9.73137 8.8 9.4C8.8 9.06863 8.53137 8.8 8.2 8.8H5Z",fill:"currentColor"})}),Fe=e=>(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",width:"32",height:"32",fill:"currentColor",...e,children:[(0,a.jsx)("path",{opacity:".25",d:"M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4"}),(0,a.jsx)("path",{d:"M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z",children:(0,a.jsx)("animateTransform",{attributeName:"transform",type:"rotate",from:"0 16 16",to:"360 16 16",dur:"0.8s",repeatCount:"indefinite"})})]});var Be="_1etk1pc6",Ge="ednwsl5v ednwsl4w";const ze=e=>{let{handleClosePopup:t,toastMsg:n,setToastMsg:s,content:i,setTagsMenuOpen:l,tagsMenuOpen:u,noteMenuOpen:m,setNoteMenuOpen:p,port:f,apiSlug:v,tagsRemoteMutator:E,formRef:_,setFormRef:g,archiveActionRemoteMutator:h,favoriteRemoteMutator:w,noteRemoteMutator:y,moreMenuOpen:T,setMoreMenuOpen:C,deleteRemoteMutator:R,saveRemoteMutator:N,contentStatus:A,resetCloseTimer:x,clearCloseTimer:S,asLink:k}=e;var b,I,O,M,L;const D=H(),j=o.useCallback((e=>{if(e.preventDefault(),_&&i){var t;s("Note added");const e=new FormData(_);D({type:"SET_ENTRY_NOTE",payload:{content:i,note:$(i.id,null===(t=i.my_note)||void 0===t?void 0:t.id,e.get(`extensionTextarea-${v}`)),remoteMutator:y}})}}),[v,i,_,D,y,s]),P=o.useCallback((e=>{m&&j(e)}),[j,m]);(0,U.bL)([_,{"$mod+Enter":P}]);const V=u||m||T;return o.useEffect((()=>{V?S():x()}),[V,S,x]),(0,a.jsx)("div",{onMouseLeave:()=>{document.activeElement&&"BODY"!==document.activeElement.nodeName||x()},onMouseMove:()=>{c()((()=>{S()}),100)},onMouseEnter:()=>{S()},className:"ednwsl5d",children:(0,a.jsxs)("div",{className:"_1etk1pca cc5c3e5 ednwsl18 ednwsl36 ednwsl4e ednwsl45 ednwsl13 ednwsl81 ednwsl86 ednwsl8j ednwsl1t ednwsl54",children:[n&&(0,a.jsxs)("div",{className:"_1etk1pc2 ednwsl4e ednwsl18",children:["Adding to Queue..."===n&&(0,a.jsx)(Fe,{className:Ge}),("Added to favorites"===n||"Added to Queue"===n||"Archived"===n||"Deleted"===n||"Removed from favorites"===n||"Note added"===n||"Tag added"===n)&&(0,a.jsx)("svg",{className:Ge,width:"16",height:"11",viewBox:"0 0 16 11",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.3772 0.254355C15.7164 0.593494 15.7164 1.14335 15.3772 1.48249L6.11407 10.7456C5.77493 11.0848 5.22507 11.0848 4.88593 10.7456L0.254355 6.11407C-0.0847849 5.77493 -0.0847849 5.22507 0.254355 4.88593C0.593494 4.54679 1.14335 4.54679 1.48249 4.88593L5.5 8.90345L14.1491 0.254355C14.4882 -0.0847849 15.0381 -0.0847849 15.3772 0.254355Z",fill:"currentColor"})}),(0,a.jsxs)("p",{children:[n,""+("Tag added"===n&&(null===i||void 0===i?void 0:i.tags.length)?` (${i.tags.length})`:"")]})]}),(0,a.jsxs)("nav",{className:"ednwsl4e ednwsl3z",children:[i&&!k&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Oe,{renderChildrenOnlyWhenOpen:!0,popoverClassName:Be,popoverSize:"l",id:"tagsPopover",position:"BOTTOM_RIGHT",controlledOpen:{open:u,setOpen:l},opener:()=>(0,a.jsx)(r.h,{disabled:A.id<0,colorScheme:A.id<0?"darkWaiting":"dark",size:"xl",borderRadius:0,onClick:()=>{l((e=>!e))},children:(0,a.jsx)(Le,{})}),children:(0,a.jsx)(he,{className:"ednwsl7p",content:i,onSubmit:()=>{s("Tag added"),l(!1)},shouldPostTagUpdates:!1,remoteMutator:E,autoFocus:!0})}),(0,a.jsx)(Oe,{renderChildrenOnlyWhenOpen:!0,popoverClassName:Be,popoverSize:319,id:"notePopover",position:"BOTTOM_RIGHT",controlledOpen:{open:m,setOpen:p},opener:()=>(0,a.jsx)(r.h,{disabled:A.id<0,colorScheme:A.id<0?"darkWaiting":"dark",size:"xl",borderRadius:0,onClick:()=>{p((e=>!e))},children:(0,a.jsx)(je,{})}),children:(0,a.jsx)(Z,{showSubmitTooltip:!1,getInputDraft:()=>{},setInputDraft:()=>{},note:(null===(b=i.my_note)||void 0===b?void 0:b.note)||"",formRef:_,setFormRef:g,noteNamespace:`extensionNS-${v}`,textareaId:`extensionTextarea-${v}`,onSubmit:e=>{if(e.preventDefault(),_&&i){var t;s("Note added");const e=new FormData(_);D({type:"SET_ENTRY_NOTE",payload:{content:i,note:$(i.id,null===(t=i.my_note)||void 0===t?void 0:t.id,e.get(`extensionTextarea-${v}`)),remoteMutator:y}})}},noteId:`extensionNote-${v}`,textareaClassName:"_1etk1pc8"})}),(0,a.jsxs)(Oe,{popoverClassName:Be,popoverSize:"l",id:"moreMenu",position:"BOTTOM_RIGHT",controlledOpen:{open:T,setOpen:C},opener:()=>(0,a.jsx)(r.h,{disabled:A.id<0,colorScheme:A.id<0?"darkWaiting":"dark",size:"xl",borderRadius:0,onClick:()=>{C((e=>!e))},children:(0,a.jsx)(we,{})}),children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(He,{content:i,toggleIsFavorite:()=>{var e;return(null===(e=i.library)||void 0===e?void 0:e.is_favorited)?D({type:"UNFAVORITE_ENTRY",payload:{content:i,remoteMutator:w}}):D({type:"FAVORITE_ENTRY",payload:{content:i,remoteMutator:w}}),Promise.resolve()}}),(null===(I=i.library)||void 0===I?void 0:I.library_state)!==d.c5.LIBRARY_STATE_ARCHIVED&&(0,a.jsxs)("button",{onClick:()=>{D({type:"ARCHIVE_ENTRY",payload:{content:i,remoteMutator:h}})},className:Ae,children:[(0,a.jsx)(Me,{className:xe}),"Archive"]}),((null===(O=i.library)||void 0===O?void 0:O.library_state)===d.c5.LIBRARY_STATE_DELETED||(null===(M=i.library)||void 0===M?void 0:M.library_state)===d.c5.LIBRARY_STATE_ARCHIVED)&&(0,a.jsxs)("button",{onClick:()=>{D({type:"SAVE_ENTRY_TO_QUEUE",payload:{content:i,remoteMutator:N}})},className:Ae,children:[(0,a.jsx)(Ve,{className:xe}),"Add to Queue"]}),(null===(L=i.library)||void 0===L?void 0:L.library_state)!==d.c5.LIBRARY_STATE_DELETED&&(0,a.jsxs)("button",{onClick:()=>{D({type:"DELETE_ENTRY",payload:{content:i,remoteMutator:R}})},className:Ae,children:[(0,a.jsx)(De,{className:xe}),"Delete"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("button",{onClick:()=>{null===f||void 0===f||f.postMessage({type:"OPEN_READER"})},className:Ae,children:[(0,a.jsx)(Ye,{className:xe})," Read now"]}),(0,a.jsxs)("button",{onClick:()=>{window.open("https://web.getmatter.com/list/queue")},className:Ae,children:[(0,a.jsx)(Ue,{className:xe}),"Go to queue"]})]})]})]}),(0,a.jsx)(r.h,{onClick:()=>{t(),null===f||void 0===f||f.postMessage({type:"CLOSE_POPUP"})},borderRadius:"rightSide10",size:"xl",border:"leftDarkElement200",colorScheme:"dark",children:(0,a.jsx)(ie.c,{})})]})]})})};var $e=()=>{const[e,t]=o.useState(!1),[n,r]=o.useState(!1),[s,i]=o.useState(!1),[l,c]=o.useState(null),[u,m]=o.useState("IDLE"),[v,E]=o.useState({id:-1,content_id:-1}),[_,g]=o.useState(""),{mutate:h,cache:w}=(0,p.kY)(),[y,T]=o.useState(-1),C=o.useRef({id:y,tags:[],library:{is_favorited:!1,library_state:d.c5.LIBRARY_STATE_SAVED},my_note:$(y)}),{data:R}=ne(y>0?`/api/contents/${y}?markdown_format=matter_v1`:null),N=o.useRef({}),A=o.useCallback((()=>{t(!1),r(!1),i(!1),setTimeout((()=>{M(!1)}),1e3)}),[]);o.useEffect((()=>{window.parent.postMessage({type:"WEB_EXT_IFRAME_READY"},"*")}),[]);const x=(e=>{const[t,n]=o.useState(null),a=o.useRef(!1);return o.useEffect((()=>{if(a.current)return;const o=t=>{e&&t.data!==e||(a.current=!0,t.ports.length&&t.ports[0]instanceof MessagePort&&n(t.ports[0]))};return window.addEventListener("message",o),()=>{window.removeEventListener("message",o),null===t||void 0===t||t.close()}}),[t,e]),t})("INIT_POPUP_MESSAGE_CHANNEL"),S=o.useRef(null),k=o.useCallback((()=>{S.current&&clearTimeout(S.current)}),[]),b=o.useCallback((()=>{k(),S.current=setTimeout((()=>{A(),null===x||void 0===x||x.postMessage({type:"CLOSE_POPUP"})}),3e3)}),[A,x,k]),I=e||n||s,[O,M]=o.useState(!1),L=o.useRef(!1);o.useEffect((()=>{if(x&&!L.current){L.current=!0;const e=async e=>{switch(e.data.type){case"CLOSE_POPUP":A();break;case"OPEN_POPUP":{const{payload:t}=e.data;if(t.asLink)m("PENDING"),g("Adding to Queue..."),M(!0);else{var n,a,o;const e=(e=>{let t=0;for(let n=0,a=e.length;n<a;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return t<0?-1*t:t})(t.url),r=w.get(`/api/contents/${e}?markdown_format=matter_v1`);var s,i,l;if(T(e),!r||(null===(n=r.library)||void 0===n?void 0:n.library_state)!==d.c5.LIBRARY_STATE_SAVED&&(null===(a=r.library)||void 0===a?void 0:a.library_state)!==d.c5.LIBRARY_STATE_ARCHIVED&&(null===(o=r.library)||void 0===o?void 0:o.library_state)!==d.c5.LIBRARY_STATE_DELETED)m("PENDING"),g("Adding to Queue..."),C.current.id=e,C.current.my_note&&(C.current.my_note.id=e),h(`/api/contents/${e}?markdown_format=matter_v1`,C.current,!1);else m("SUCCEEDED"),(null===(s=r.library)||void 0===s?void 0:s.library_state)===d.c5.LIBRARY_STATE_SAVED?g("Added to Queue"):(null===(i=r.library)||void 0===i?void 0:i.library_state)===d.c5.LIBRARY_STATE_ARCHIVED?g("Archived"):(null===(l=r.library)||void 0===l?void 0:l.library_state)===d.c5.LIBRARY_STATE_DELETED&&g("Deleted"),E((e=>{var n;return{...e,...null===(n=t.storedState)||void 0===n?void 0:n.contentStatus}}))}I||(await Q()((()=>"PENDING"!==u)),b());break}case"OPEN_TAGS_MENU":t(!0);break;case"OPEN_NOTE_MENU":r(!0);break;case"SAVE_PAGE_SUCCEEDED":{const{payload:t}=e.data;e.data.payload.json&&(E((e=>({...e,...t.json}))),m("SUCCEEDED"),g("Added to Queue"));break}case"SAVE_PAGE_FAILED":m("FAILED"),g("Sorry, save failed"),T((e=>(h(`/api/contents/${e}?markdown_format=matter_v1`,null),-1)));break;case"TAGS":h("/api/tags",{tags:e.data.payload},!1);break;case"RESOLVE_MSG_ID":N.current[e.data.payload.msgId]=e.data.payload.status}};x.onmessage=e,x.postMessage({type:"POPUP_MESSAGE_CHANNEL_READY"})}}),[x,h,y,w,A,b,u,I]);const D=o.useCallback((async e=>{var t,n,a;e.tags.length>0?g("Tag added"):g("Added to Queue");const o=(0,f.x0)();N.current[o]="PENDING",null===x||void 0===x||x.postMessage({type:"SET_ENTRY_ATTRIBUTES",payload:{id:v.id,attributes:{tags:e.tags.map((e=>e.name)),is_favorited:null===R||void 0===R||null===(t=R.library)||void 0===t?void 0:t.is_favorited,note:(null===R||void 0===R||null===(n=R.my_note)||void 0===n?void 0:n.note)||"",library_state:(null===R||void 0===R||null===(a=R.library)||void 0===a?void 0:a.library_state)||d.c5.LIBRARY_STATE_SAVED},msgId:o}}),await Q()((()=>"FAILED"===N.current[o]?Promise.reject("tagsRemoteMutator failed"):"SUCCEEDED"===N.current[o]),{timeout:1e4})}),[x,R,v.id]),j=o.useCallback((async e=>{var t,n,a;g("Archived"),i(!1);const o=(0,f.x0)();N.current[o]="PENDING",null===x||void 0===x||x.postMessage({type:"SET_ENTRY_ATTRIBUTES",payload:{id:v.id,attributes:{tags:(null===R||void 0===R?void 0:R.tags.map((e=>e.name)))||[],is_favorited:null===R||void 0===R||null===(t=R.library)||void 0===t?void 0:t.is_favorited,note:(null===R||void 0===R||null===(n=R.my_note)||void 0===n?void 0:n.note)||"",library_state:(null===R||void 0===R||null===(a=R.library)||void 0===a?void 0:a.library_state)!==d.c5.LIBRARY_STATE_SAVED?d.c5.LIBRARY_STATE_SAVED:d.c5.LIBRARY_STATE_ARCHIVED},msgId:o}}),await Q()((()=>"FAILED"===N.current[o]?Promise.reject("archiveActionRemoteMutator failed"):"SUCCEEDED"===N.current[o]),{timeout:1e4})}),[R,v.id,x]),P=o.useCallback((async e=>{var t,n,a;e.library.is_favorited,g(e.library.is_favorited?"Added to favorites":"Removed from favorites"),i(!1);const o=(0,f.x0)();N.current[o]="PENDING",null===x||void 0===x||x.postMessage({type:"SET_ENTRY_ATTRIBUTES",payload:{id:v.id,attributes:{tags:(null===R||void 0===R?void 0:R.tags.map((e=>e.name)))||[],is_favorited:!(null===R||void 0===R||null===(t=R.library)||void 0===t?void 0:t.is_favorited),note:(null===R||void 0===R||null===(n=R.my_note)||void 0===n?void 0:n.note)||"",library_state:null===R||void 0===R||null===(a=R.library)||void 0===a?void 0:a.library_state},msgId:o}}),await Q()((()=>"FAILED"===N.current[o]?Promise.reject("favoriteRemoteMutator failed"):"SUCCEEDED"===N.current[o]),{timeout:1e4})}),[R,x,v.id]),H=o.useCallback((async e=>{var t,n,a;const o=(0,f.x0)();N.current[o]="PENDING",r(!1),null===x||void 0===x||x.postMessage({type:"SET_ENTRY_ATTRIBUTES",payload:{id:v.id,attributes:{tags:(null===R||void 0===R?void 0:R.tags.map((e=>e.name)))||[],is_favorited:!(null===R||void 0===R||null===(t=R.library)||void 0===t?void 0:t.is_favorited),note:e.my_note.note||(null===R||void 0===R||null===(n=R.my_note)||void 0===n?void 0:n.note)||"",library_state:null===R||void 0===R||null===(a=R.library)||void 0===a?void 0:a.library_state},msgId:o}}),await Q()((()=>"FAILED"===N.current[o]?Promise.reject("noteRemoteMutator failed"):"SUCCEEDED"===N.current[o]),{timeout:1e4})}),[R,x,N,v.id]),V=o.useCallback((async e=>{var t,n;g("Deleted"),i(!1);const a=(0,f.x0)();N.current[a]="PENDING",null===x||void 0===x||x.postMessage({type:"SET_ENTRY_ATTRIBUTES",payload:{id:v.id,attributes:{tags:(null===R||void 0===R?void 0:R.tags.map((e=>e.name)))||[],is_favorited:null===R||void 0===R||null===(t=R.library)||void 0===t?void 0:t.is_favorited,note:(null===R||void 0===R||null===(n=R.my_note)||void 0===n?void 0:n.note)||"",library_state:d.c5.LIBRARY_STATE_DELETED},msgId:a}}),await Q()((()=>"FAILED"===N.current[a]?Promise.reject("deleteRemoteMutator failed"):"SUCCEEDED"===N.current[a]),{timeout:1e4})}),[R,v.id,x]),U=o.useCallback((async e=>{var t,n;g("Added to Queue"),i(!1);const a=(0,f.x0)();N.current[a]="PENDING",null===x||void 0===x||x.postMessage({type:"SET_ENTRY_ATTRIBUTES",payload:{id:v.id,attributes:{tags:(null===R||void 0===R?void 0:R.tags.map((e=>e.name)))||[],is_favorited:null===R||void 0===R||null===(t=R.library)||void 0===t?void 0:t.is_favorited,note:(null===R||void 0===R||null===(n=R.my_note)||void 0===n?void 0:n.note)||"",library_state:d.c5.LIBRARY_STATE_SAVED},msgId:a}}),await Q()((()=>"FAILED"===N.current[a]?Promise.reject("saveRemoteMutator failed"):"SUCCEEDED"===N.current[a]),{timeout:1e4})}),[R,v.id,x]);return(0,a.jsx)(ze,{handleClosePopup:A,toastMsg:_,setToastMsg:g,content:R,setTagsMenuOpen:t,tagsMenuOpen:e,noteMenuOpen:n,setNoteMenuOpen:r,port:x,apiSlug:y,tagsRemoteMutator:D,formRef:l,setFormRef:c,archiveActionRemoteMutator:j,favoriteRemoteMutator:P,noteRemoteMutator:H,moreMenuOpen:s,setMoreMenuOpen:i,deleteRemoteMutator:V,saveRemoteMutator:U,contentStatus:v,resetCloseTimer:b,clearCloseTimer:k,asLink:O})}},7062:function(){},6433:function(){},1983:function(){},9034:function(){},5330:function(){},8509:function(){},9928:function(){},1529:function(){},7878:function(){},2829:function(){},1967:function(){},1979:function(){}},function(e){e.O(0,[732,774,888,179],(function(){return t=9536,e(e.s=t);var t}));var t=e.O();_N_E=t}]);